### Nosql概述

------

- 为什么使用Nosql？

  > 1. 单机MySQL的年代
  >
  >    以前一个基本的网站访问量一般不会太大，单个数据库完全足够了！此时网站的瓶颈
  >
  >    - 数据量如果太大，一个机器放不下。
  >    - 数据的索引如果太大，一个机器的内存放不下
  >    - 访问量（读写混合），一个服务器承受不了。

  ![image-20200909214208899](.\pictures\1.png)

  > 2. Memcache（缓存）+ MySQL + 垂直拆分（读写分离）
  >    - 缓存：网站基本上都是在读取数据库中的数据，每次都要去查询数据库很麻烦，所以我们希望减轻数据库的压力，可以使用缓存来保证效率。
  >    - 发展过程：优化数据结构和索引--->文件缓存---->Memcached（当时最热门的技术！）

![image-20200909215733400](.\pictures\2.png)

> 3. 分库分表 + 水平拆分 + MySQL集群
>    - 使用分库分表解决“**写**”的压力

![image-20200909220551816](.\pictures\3.png)

> 4. 如今的时代
>
>    - 数据是多种格式的，而且数据量很大，变化很快。
>    - MySQL有时候还用来存储一些比较大的文件，比如博客、图片等，导致数据库表很大。如果有一种数据库来专门处理这种类型的数据，MySQL的压力就会变得很小。
>
> 5. 为什么使用NoSQL？
>
>    用户的个人信息，社交网络，地理位置，用户自己产生的数据，用户日志等等爆发式增长。这是用就需要使用NoSQL数据库。

![image-20200909222141296](.\pictures\4.png)



- **什么是NoSQL？**

  - NoSQL = Not Only SQL，泛指**非关系新数据库**。

  - 很多数据类型，比如：用户的个人信息、社交网络、地理位置、这些数据类型不需要一个固定的格式！不需要多余的操作就可以横向扩展的（即可以通过集群管理）。

- **NoSQL的特点**

  1. 方便扩展（数据之间没有数据，很好扩展！）

  2. 大数据量高性能（Redis一秒写8万次，读取11万次）

  3. 数据类型是多样型的！（**不需要事先设计数据库，随取随用！**）

     >NoSQL
     >
     >- 不仅仅是数据
     >- 没有固定的查询语句
     >- 键值对存储、列存储、文档存储、图形数据库
     >- 最终一致性
     >- CAP定理和BASE理论
     >- 高性能、高可用、高可扩展



**大数据3v，3高**

- 3v

  - 海量Volume
  - 多样Variety
  - 实时Velocity

- 3高

  - 高并发

  - 高可扩（即可以随时水平拆分：机器不够了，可以随时搭建集群）

  - 高性能

    

**NoSQL + 传统型数据库**才是最好的。



### NoSQL的四大分类

---

##### kv键值对

- **Redis**

##### 文档型数据库（bson格式，和json一样，是二进制的json）

- **MongoDB**（一般必须要掌握）
  - 是一个基于分布式文件存储的数据库，C++编写，主要用来处理大量的文档数据。
  - MongoDB是一个介于关系型数据库和非关系型数据库的中间的产品。MongoDB是非关系型数据库中功能最丰富的，最像关系型数据库的数据库。
- ConthDB

##### 列存储数据库

- **HBase**
- 分布式文件系统

##### 图关系数据库

- 不是用来存图形的，是用来**存关系**的。比如，朋友圈社交网络，广告推荐
- **Neo4J**

![image-20200909233522023](.\pictures\5.png)