##### 什么是虚拟内存

- **虚拟内存是**计算机系统管理内存的一种技术，它使得应用程序认为它拥有**连续的**可用的内存。而实际上，进程所拥有的内存被分割成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。

##### 虚拟内存的作用

1. **缓存**：将主存视为一个存储在磁盘上的地址空间的高速缓冲，在主存中只保存进程的活动区域（不需要完全加载进程，即可开始运行），并根据需要在磁盘和主存之间来回传送数据。

2. **内存管理**：为每个进程提供了一致的地址空间，简化内存管理。

   - 操作系统为每一个进程提供了独立的“页表“，所以每一个进程都有独立的虚拟地址空间。

   - **简化链接**：独立地址空间允许每个进程的**内存映像**使用相同的基本格式。

     ![img](.\pictures\webp)

   - **简化共享**：一般情况下，每个进程都有自己私有的内存映像：只需要保证其他进程的页表表项不映射到该进程占用的物理页即可。在需要共享的情况下，操作系统只需要将不同进程中适当的虚拟页面映射到相同的物理页面，从而安排多个进程共享这部分代码或者数据。

   - **简化内存分配**：当运行在用户进程的程序需要额外的堆空间时，操作系统分配k个连续的虚拟内存页面，并且将它们映射到物理内存中任意位置的k个任意的物理页面。由于页表的存在，操作系统没必要分配k的连续的物理页面，页面可以随机的分散在物理内存中。总之：从进程的角度看，他获得了连续的内存空间，但是操作系统实际分配的是离散的地址空间。

3. **内存保护**：保护了每个进程的地址空间不被其他进程破坏。

